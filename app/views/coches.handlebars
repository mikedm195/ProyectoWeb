<h1>Lista de coches</h1>
<table class="table table-striped">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Modelo</th>
            <th>AÃ±o</th>
        </tr>
    </thead>
    <tbody>
        {{#each coches}}
        <tr>
            <td>{{nombre}}</td>
            <td>{{modelo}}</td>
            <td>{{anio}}</td>
            {{#if session}}
            <td>
                <button type="button" class="btn btn-primary" aria-label="Left Align" onclick="editP({{id}})">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                </button>
                <button type="button" class="btn btn-danger" aria-label="Left Align" onclick="deleteP(event,{{id}})">
                    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                </button>
                <div class="clearfix"></div>
            </td>
            {{/if}}
        </tr>
        {{/each}}
    </tbody>
</table>
<div class="col-md-4">
    <a href="/coches/agregarCoche" class="btn btn-default">Agregar coche</a>
</div>
<script>
function deleteP(evt, id){
    evt.preventDefault();
    var data = { id: id }
    $.ajax({
        type: 'DELETE',
        url: 'http://localhost:3000/coches',
        data: data,
        dataType: 'json',
        success: function(data){
            window.location.href = "/coches";
            alert("Coche eliminada correctamente");
        },
        error: function(){
            console.log("ERROR");
        }
    });
}
function editP(id){
    window.location.href = `/coches/editarCoche/${id}`;
}
</script>
